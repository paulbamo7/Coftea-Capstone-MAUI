<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Coftea_Capstone.Views.Controls.ConnectPOSItemToInventory"
             BackgroundColor="#80000000"
             IsVisible="{Binding IsConnectPOSToInventoryVisible}"
             HorizontalOptions="FillAndExpand"
             VerticalOptions="FillAndExpand">

    <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
        <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="20">
            <HorizontalStackLayout Spacing="20">
                <!-- Left Frame: Ingredients / Addons -->
                <Frame BackgroundColor="#D8C4B6" CornerRadius="20" WidthRequest="500" HeightRequest="600" Padding="20">
                    <VerticalStackLayout Spacing="15">

                        <!-- Top Frame: Selected Inventory / Addons -->
                        <Frame BackgroundColor="#EAEAEA" CornerRadius="10" Padding="10" HasShadow="False" HeightRequest="200">
                            <VerticalStackLayout>
                                <Label Text="SELECTED INVENTORY ITEMS" FontAttributes="Bold" FontSize="20"/>
                                <ScrollView>
                                    <StackLayout BindableLayout.ItemsSource="{Binding Ingredients}">
                                        <BindableLayout.ItemTemplate>
                                            <DataTemplate>
                                                <Label Text="{Binding Name}" FontSize="18" IsVisible="{Binding Selected}"/>
                                            </DataTemplate>
                                        </BindableLayout.ItemTemplate>
                                    </StackLayout>
                                </ScrollView>
                            </VerticalStackLayout>
                        </Frame>

                        <!-- Bottom Frame: Addons Measurement -->
                        <Frame BackgroundColor="White" CornerRadius="10" Padding="10" HasShadow="False" HeightRequest="400">
                            <VerticalStackLayout Spacing="10">
                                <Label Text="ADDONS MEASUREMENT" FontAttributes="Bold" FontSize="20"/>
                                <ScrollView>
                                    <StackLayout BindableLayout.ItemsSource="{Binding Ingredients}">
                                        <BindableLayout.ItemTemplate>
                                            <DataTemplate>
                                                <!-- Only show selected items -->
                                                <HorizontalStackLayout Spacing="10" IsVisible="{Binding Selected}">
                                                    <Label Text="{Binding Name}" FontSize="18" VerticalOptions="Center"/>
                                                    <Label Text="{Binding Amount, StringFormat='Qty: {0}'}" FontSize="18" VerticalOptions="Center"/>
                                                </HorizontalStackLayout>
                                            </DataTemplate>
                                        </BindableLayout.ItemTemplate>
                                    </StackLayout>
                                </ScrollView>
                            </VerticalStackLayout>
                        </Frame>

                    </VerticalStackLayout>
                </Frame>




                <!-- Right Frame: Product Preview -->
                <Frame BackgroundColor="#F8E8D7" CornerRadius="20" WidthRequest="500" HeightRequest="600" Padding="20">
                    <VerticalStackLayout Spacing="15">
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <Label Text="PREVIEW" FontSize="24" FontAttributes="Bold" VerticalOptions="Center" Grid.Column="0"/>
                            <ImageButton Source="close.png" WidthRequest="20" HeightRequest="20" Grid.Column="1" 
                         VerticalOptions="Center"
                         Command="{Binding ClosePreviewCommand}"
                         BackgroundColor="Transparent"/>
                        </Grid>

                        <!-- Product Image -->
                        <Frame BackgroundColor="White" HeightRequest="150" CornerRadius="10" HasShadow="False">
                            <Image Source="{Binding SelectedImageSource}" Aspect="AspectFill"/>
                        </Frame>

                        <!-- Product Preview -->
                        <Label Text="{Binding ProductName, StringFormat='Name: {0}'}" FontAttributes="Bold" FontSize="22"/>
                        <HorizontalStackLayout VerticalOptions="Center" Spacing="12"> 
                            <Label Text="Category:" FontAttributes="Bold" FontSize="18"/>
                            <Label Text="{Binding SelectedCategory}" FontAttributes="Bold" FontSize="18"/>
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Spacing="20">
                            <VerticalStackLayout>
                                <Label Text="Small Price" FontAttributes="Bold"/>
                                <Label Text="{Binding SmallPrice, StringFormat='₱{0:F2}'}" FontSize="18"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout>
                                <Label Text="Large Price" FontAttributes="Bold"/>
                                <Label Text="{Binding LargePrice, StringFormat='₱{0:F2}'}" FontSize="18"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <Label Text="Description" FontAttributes="Bold"/>
                        <ScrollView HeightRequest="80">
                            <Label Text="{Binding ProductDescription}" FontSize="16"/>
                        </ScrollView>

                        <HorizontalStackLayout HorizontalOptions="End" Spacing="20" >
                            <Button Text="Edit" BackgroundColor="#D3D3D3" TextColor="Black"
                    Command="{Binding ReturnToAddItemToPOSCommand}"/>
                            <Button Text="Confirm" BackgroundColor="#E6DE9D" TextColor="Black"
                    Command="{Binding ConfirmPreviewCommand}"/>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Frame>



            </HorizontalStackLayout>
        </VerticalStackLayout>
    </Grid>
</ContentView>
