<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Coftea_Capstone.Views.Controls.SimplePieChart"
             x:Name="PieChartControl"
             BackgroundColor="Transparent">
    
    <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
        <Grid x:Name="ChartContainer" 
              HorizontalOptions="Center" 
              VerticalOptions="Center"
              WidthRequest="200" 
              HeightRequest="200">
            
            <!-- Donut Chart with GraphicsView for perfect circle rendering -->
            <Grid x:Name="PieChartGrid" 
                  HorizontalOptions="Center" 
                  VerticalOptions="Center"
                  WidthRequest="160" 
                  HeightRequest="160">
                <GraphicsView x:Name="PieChartCanvas"
                              HorizontalOptions="Center"
                              VerticalOptions="Center"
                              WidthRequest="160"
                              HeightRequest="160" />
            </Grid>
        </Grid>
        
        <!-- Legend (can be hidden via ShowLegend) -->
        <VerticalStackLayout HorizontalOptions="End" VerticalOptions="Center" Spacing="12" Margin="0,0,20,0"
                              IsVisible="{Binding ShowLegend, Source={x:Reference PieChartControl}}">
            <!-- Item 1 -->
            <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                <Ellipse Fill="#90EE90" WidthRequest="12" HeightRequest="12"/>
                <VerticalStackLayout Spacing="2">
                    <Label Text="{Binding Item1Name}" FontSize="12" FontFamily="MontserratBlack" FontAttributes="Bold" TextColor="#5B4F45"/>
                    <HorizontalStackLayout Spacing="4">
                        <Label Text="{Binding Item1Count, StringFormat='{0} sold'}" FontSize="10" FontFamily="MontserratBlack" TextColor="Gray"/>
                        <Label Text="↗" FontSize="10" FontFamily="MontserratBlack" TextColor="Green" IsVisible="{Binding Item1HasTrend}"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </HorizontalStackLayout>
            
            <!-- Item 2 -->
            <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                <Ellipse Fill="#F5DEB3" WidthRequest="12" HeightRequest="12"/>
                <VerticalStackLayout Spacing="2">
                    <Label Text="{Binding Item2Name}" FontSize="12" FontFamily="MontserratBlack" FontAttributes="Bold" TextColor="#5B4F45"/>
                    <HorizontalStackLayout Spacing="4">
                        <Label Text="{Binding Item2Count, StringFormat='{0} sold'}" FontSize="10" FontFamily="MontserratBlack" TextColor="Gray"/>
                        <Label Text="↗" FontSize="10" FontFamily="MontserratBlack" TextColor="Green" IsVisible="{Binding Item2HasTrend}"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </HorizontalStackLayout>
            
            <!-- Item 3 -->
            <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                <Ellipse Fill="#8B4513" WidthRequest="12" HeightRequest="12"/>
                <VerticalStackLayout Spacing="2">
                    <Label Text="{Binding Item3Name}" FontSize="12" FontFamily="MontserratBlack" FontAttributes="Bold" TextColor="#5B4F45"/>
                    <HorizontalStackLayout Spacing="4">
                        <Label Text="{Binding Item3Count, StringFormat='{0} sold'}" FontSize="10" FontFamily="MontserratBlack" TextColor="Gray"/>
                        <Label Text="↗" FontSize="10" FontFamily="MontserratBlack" TextColor="Green" IsVisible="{Binding Item3HasTrend}"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </HorizontalStackLayout>
        </VerticalStackLayout>
    </Grid>
</ContentView>
