<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="Coftea_Capstone.Views.Controls.AddItemToPOS"
    xmlns:views="clr-namespace:Coftea_Capstone.Views.Pages"
    xmlns:otherViews="clr-namespace:Coftea_Capstone.Views.Controls"
    BackgroundColor="#80000000"
    IsVisible="{Binding IsAddItemToPOSVisible}"
    InputTransparent="False">

    <Grid ColumnDefinitions="200, *" RowDefinitions="*" InputTransparent="False">

        <VerticalStackLayout Grid.Column="1" Padding="30,50,30,50" Spacing="20">
            <HorizontalStackLayout Spacing="20">

                <!-- Left Panel: Product Details -->
                <Frame CornerRadius="25" BackgroundColor="#F8E8D7" HasShadow="True" WidthRequest="500" HeightRequest="600" Padding="25">
                    <VerticalStackLayout Spacing="15">

                        <!-- Header -->
                        <Label Text="Product Details" FontAttributes="Bold" FontSize="28" TextColor="#4B3832" />

                        <!-- Product Name -->
                        <Label Text="Product Name" FontSize="20" TextColor="#4B3832"/>
                        <Frame CornerRadius="10" Padding="5" BackgroundColor="Transparent" BorderColor="#B89C83" HasShadow="False">
                            <Entry Placeholder="Enter Product Name"
                                   PlaceholderColor="#4B3832"
                                   Text="{Binding ProductName}"
                                   BackgroundColor="Transparent"
                                   FontSize="16"
                                   TextColor="#4B3832"/>
                        </Frame>

                        <!-- Product Image -->
                        <Frame CornerRadius="15" BackgroundColor="#F8E8D7" HeightRequest="160" Padding="5">
                            <Grid>
                                <Button BackgroundColor="Transparent" Command="{Binding PickImageCommand}" />
                                <Image Source="{Binding SelectedImageSource}" Aspect="AspectFit"/>
                            </Grid>
                        </Frame>

                        <!-- Category & Subcategory -->
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                            <VerticalStackLayout Spacing="5" Grid.Column="0">
                                <Label Text="Category" FontSize="20" TextColor="#4B3832"/>
                                <Picker Title="Select Category"
                                        ItemsSource="{Binding Categories}"
                                        SelectedItem="{Binding SelectedCategory}"
                                        FontSize="16"
                                        TextColor="#4B3832"
                                        BackgroundColor="Transparent"/>
                            </VerticalStackLayout>

                            <VerticalStackLayout Spacing="5" Grid.Column="1" IsVisible="{Binding IsFruitSodaSubcategoryVisible}">
                                <Label Text="Subcategory" FontSize="20" TextColor="#4B3832"/>
                                <Picker Title="Select Subcategory"
                                        ItemsSource="{Binding FruitSodaSubcategories}"
                                        SelectedItem="{Binding SelectedSubcategory}"
                                        FontSize="16"
                                        TextColor="#4B3832"
                                        BackgroundColor="Transparent"/>
                            </VerticalStackLayout>
                        </Grid>

                        <!-- Color Code -->
                        <Label Text="Color Code" FontSize="20" TextColor="#4B3832"/>
                        <Frame CornerRadius="10" Padding="5" BackgroundColor="Transparent" BorderColor="#B89C83" HasShadow="False">
                            <Entry Placeholder="Enter Color Code"
                                   PlaceholderColor="#4B3832"
                                   Keyboard="Text"
                                   Text="{Binding ProductColorCode}"
                                   BackgroundColor="Transparent"
                                   FontSize="16"
                                   TextColor="#4B3832"/>
                        </Frame>
                    </VerticalStackLayout>
                </Frame>

                <!-- Right Panel: Pricing & Description -->
                <Frame CornerRadius="25" BackgroundColor="#F8E8D7" HasShadow="True" WidthRequest="500" HeightRequest="600" Padding="25">
                    <VerticalStackLayout Spacing="15">

                        <!-- Header -->
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Text="Product Size" FontAttributes="Bold" FontSize="28" Grid.Column="0" VerticalOptions="Center" TextColor="#4B3832"/>
                            <ImageButton Source="close.png" WidthRequest="25" HeightRequest="25" Grid.Column="1" VerticalOptions="Center" Command="{Binding CloseAddItemToPOSCommand}"/>
                        </Grid>

                        <!-- Pricing Grid -->
                        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="15">
                            <VerticalStackLayout Spacing="5" Grid.Column="0">
                                <Label Text="Small Price" FontSize="20" TextColor="#4B3832"/>
                                <Frame CornerRadius="10" Padding="5" BackgroundColor="Transparent" BorderColor="#B89C83" HasShadow="False">
                                    <Entry Placeholder="Enter Small Price"
                                           Keyboard="Numeric"
                                           Text="{Binding SmallPrice}"
                                           BackgroundColor="Transparent"
                                           TextColor="#4B3832"/>
                                </Frame>
                            </VerticalStackLayout>

                            <VerticalStackLayout Spacing="5" Grid.Column="1">
                                <Label Text="Medium Price" FontSize="20" TextColor="#4B3832"/>
                                <Frame CornerRadius="10" Padding="5" BackgroundColor="Transparent" BorderColor="#B89C83" HasShadow="False">
                                    <Entry Placeholder="Enter Medium Price"
                                           Keyboard="Numeric"
                                           Text="{Binding MediumPrice}"
                                           BackgroundColor="Transparent"
                                           TextColor="#4B3832"/>
                                </Frame>
                            </VerticalStackLayout>

                            <VerticalStackLayout Spacing="5" Grid.Column="2">
                                <Label Text="Large Price" FontSize="20" TextColor="#4B3832"/>
                                <Frame CornerRadius="10" Padding="5" BackgroundColor="Transparent" BorderColor="#B89C83" HasShadow="False">
                                    <Entry Placeholder="Enter Large Price"
                                           Keyboard="Numeric"
                                           Text="{Binding LargePrice}"
                                           BackgroundColor="Transparent"
                                           TextColor="#4B3832"/>
                                </Frame>
                            </VerticalStackLayout>
                        </Grid>

                        <!-- Description -->
                        <Label Text="Description (Optional)" FontSize="20" TextColor="#4B3832"/>
                        <Frame CornerRadius="10" Padding="5" BackgroundColor="Transparent" BorderColor="#B89C83" HasShadow="False">
                            <Editor Placeholder="Enter product description..."
                                    Text="{Binding ProductDescription}"
                                    BackgroundColor="Transparent"
                                    TextColor="#4B3832"
                                    FontSize="16"
                                    HeightRequest="150"/>
                        </Frame>

                        <!-- Action Buttons -->
                        <HorizontalStackLayout HorizontalOptions="End" Spacing="15">
                            <Button Text="Close" WidthRequest="120" HeightRequest="45"
                                    BackgroundColor="#D3D3D3" TextColor="#4B3832"
                                    CornerRadius="20"
                                    Command="{Binding CloseAddItemToPOSCommand}"/>
                            <Button Text="Next" WidthRequest="150" HeightRequest="45"
                                    BackgroundColor="#E6DE9D" TextColor="#4B3832"
                                    CornerRadius="20"
                                    Command="{Binding OpenConnectPOSToInventoryCommand}"/>
                        </HorizontalStackLayout>

                    </VerticalStackLayout>
                </Frame>

            </HorizontalStackLayout>
        </VerticalStackLayout>

        <!-- Subcomponents -->
        <otherViews:ConnectPOSItemToInventory BindingContext="{Binding ConnectPOSToInventoryVM}" Grid.Column="2"/>
        <otherViews:InputIngredientsAmountUsed BindingContext="{Binding ConnectPOSToInventoryVM}" Grid.Column="2"/>

        <!-- Success popup -->
        <otherViews:SuccessCardPopup BindingContext="{Binding Source={x:Static Application.Current}, Path=SuccessCardPopup}" Grid.ColumnSpan="2" />

    </Grid>
</ContentView>
