<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Coftea_Capstone.Views.Controls.UserProfilePopup"
             xmlns:vm="clr-namespace:Coftea_Capstone.ViewModel.Controls"
             BackgroundColor="Transparent"
             IsVisible="{Binding IsVisible}">

    <ContentView.BindingContext>
        <vm:UserProfilePopupViewModel />
    </ContentView.BindingContext>

    <!-- Overlay Background -->
    <Grid BackgroundColor="#80000000" 
          VerticalOptions="FillAndExpand" 
          HorizontalOptions="FillAndExpand">
        
        <!-- Main Popup Container -->
        <Frame BackgroundColor="White"
               CornerRadius="20"
               HasShadow="True"
               BorderColor="#E0E0E0"
               Margin="40"
               VerticalOptions="Center"
               HorizontalOptions="Center"
               WidthRequest="600"
               HeightRequest="400">
            
            <Grid RowDefinitions="Auto, *" ColumnDefinitions="*, *">
                
                <!-- Left Section - Profile Picture and Name -->
                <Grid Grid.Row="0" Grid.Column="0" Padding="30" VerticalOptions="Center">
                    <VerticalStackLayout Spacing="20" HorizontalOptions="Center">
                        
                        <!-- Profile Picture -->
                        <Frame BackgroundColor="#F0F0F0"
                               CornerRadius="60"
                               WidthRequest="120"
                               HeightRequest="120"
                               HasShadow="True"
                               HorizontalOptions="Center">
                            <Image Source="profile_placeholder.png"
                                   WidthRequest="100"
                                   HeightRequest="100"
                                   Aspect="AspectFill"/>
                        </Frame>
                        
                        <!-- User Name -->
                        <Label Text="{Binding UserName}"
                               FontSize="24"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               TextColor="Black"/>
                    </VerticalStackLayout>
                </Grid>
                
                <!-- Right Section - User Details -->
                <Grid Grid.Row="0" Grid.Column="1" Padding="30">
                    <VerticalStackLayout Spacing="15">
                        
                        <!-- Details Header -->
                        <Label Text="Details"
                               FontSize="24"
                               FontAttributes="Bold"
                               TextColor="Black"
                               Margin="0,0,0,10"/>
                        
                        <!-- User Information -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="{Binding FullName, StringFormat='Full Name: {0}'}"
                                   FontSize="16"
                                   TextColor="Black"/>
                            
                            <Label Text="{Binding Email, StringFormat='Email: {0}'}"
                                   FontSize="16"
                                   TextColor="Black"/>
                            
                            <Label Text="{Binding PhoneNumber, StringFormat='Phone Number: {0}'}"
                                   FontSize="16"
                                   TextColor="Black"/>
                            
                            <Label Text="{Binding Address, StringFormat='Address: {0}'}"
                                   FontSize="16"
                                   TextColor="Black"/>
                            
                            <Label Text="{Binding Birthday, StringFormat='Birthday: {0:MMMM dd, yyyy}'}"
                                   FontSize="16"
                                   TextColor="Black"/>
                        </VerticalStackLayout>
                        
                        <!-- Permissions Section -->
                        <VerticalStackLayout Spacing="8" Margin="0,20,0,0">
                            <Label Text="Permissions:"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="Black"/>
                            
                            <HorizontalStackLayout Spacing="10">
                                <Button Text="Edit Inventory"
                                        BackgroundColor="#FFB6C1"
                                        TextColor="White"
                                        CornerRadius="15"
                                        Padding="15,8"
                                        FontSize="14"
                                        IsEnabled="{Binding CanEditInventory}"
                                        Command="{Binding ToggleInventoryPermissionCommand}"/>
                                
                                <Button Text="Edit POS Menu"
                                        BackgroundColor="#90EE90"
                                        TextColor="White"
                                        CornerRadius="15"
                                        Padding="15,8"
                                        FontSize="14"
                                        IsEnabled="{Binding CanEditPOSMenu}"
                                        Command="{Binding TogglePOSMenuPermissionCommand}"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Grid>
                
                <!-- Close Button -->
                <Button Text="Close"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        CornerRadius="15"
                        Padding="20,10"
                        FontSize="16"
                        Grid.Row="1"
                        Grid.ColumnSpan="2"
                        HorizontalOptions="End"
                        VerticalOptions="End"
                        Margin="0,20,30,30"
                        Command="{Binding CloseCommand}"/>
            </Grid>
        </Frame>
    </Grid>
</ContentView>
